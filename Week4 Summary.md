## Week4 Summary

> 赵沛阳 2020010758 2023/3/18

### 学习内容

- 根据[blog](https://blog.csdn.net/scott198510/category_11804215.html)以及《**GNSS与惯性及多传感器组合导航系统原理**》，直观理解卡尔曼滤波，并总结了全球卫星导航系统的特点，以及GNSS卫星定位的原理和误差源
  - 笔记链接：[笔记1](https://github.com/zhaopy20/GNSS_stu/blob/main/INSGNSS组合导航（0）卡尔曼滤波.md),[笔记2](https://github.com/zhaopy20/GNSS_stu/blob/main/INSGNSS组合导航（二）GNSS卫星定位原理及误差源.md)

- 根据[知乎专栏](https://zhuanlan.zhihu.com/p/531982841)在vs 中运行RTKLIB开源代码，使用rtklib自带工具对输出结果分析
  - [笔记链接](https://github.com/zhaopy20/GNSS_stu/blob/main/RTKLIB%20入门.md)

- 学习[blog](https://blog.csdn.net/tyst08/category_9322275.html)专栏一至十，配合书籍《GNSS原理与接收机设计》前五章，从GPS的基本知识（如时间、坐标系）到定位方程的解算原理系统学习了解
  - [笔记链接](https://github.com/zhaopy20/GNSS_stu/blob/main/GPS.md)


### 知识点总结

#### GPS定位原理

- 关键点在于接收机钟差未知，需要求解含有位置三个未知量以及接收机钟差共四个未知量的**四元方程组**

#### GPS时间

- GPS时间不同于世界协调时UTC，用周数和周内秒来表示，由此可以推导出GPS时间与UTC时间的转换
- 每个卫星有自己的**卫星时间**，GPS时间、卫星时间、UTC三者可以互相推导，但**接收机时间独立于三者**，是未知量

#### GPS坐标系

- 坐标系分为惯性坐标系和非惯性坐标系
- 所有坐标系满足**右手正交准则**
- 不同坐标系的意义和使用场景不同
- 不同坐标系之间有转换关系
- 其中直角坐标系和LLA坐标之间转换可以利用rtk软件进行数值转换

#### GPS信号结构

- GPS信号分为载波、伪码、数据码三层
- 伪码和数据码需要先调制到载波上，卫星发射的是载波信号
  - 载波的意义
- 伪码
  - 伪码作用：码分多址和**测距**，但不能传递信息
  - C/A有良好的**相关特性**：自相关幅值远大于互相关幅值，便于识别
  - 码片时间1ms，对应长度300m
  - 更高精度的测距利用**载波相位**
- 数据码
  - 传递**导航电文**
  - 一个比特20ms，比特与码片的对应关系

#### GPS导航电文

- 导航电文包含时间、卫星运行轨道、电离层延时等信息，对于结算位置与速度很关键
- 导航电文的各级结构及持续时间
- 星历与历书的比较：有效时间、作用、精度对比

#### 开普勒轨道参数

- 开普勒三定律，用于椭圆运动，对于参数计算和位置解算有重要作用
- 开普勒轨道六参数<img src="https://raw.githubusercontent.com/zhaopy20/pictures/main/img/202303182050399.png" alt="image-20230317163655044" style="zoom: 50%;" />
- 确定卫星位置步骤：
  - 首先确定轨道平面
  - 进一步确定卫星在轨道平面的位置
  - 利用**偏近点角E**和**平近点角M**计算**真近点角v**

#### 位置解算

- 需要了解**星历中参数的意义**
- 首先根据几何关系得到 r 的计算公式：$r=a_s(1-e_s\cos E)$
  - 接着极坐标转换为轨道直角坐标
  - 最后将轨道直角坐标转换为WGS-84坐标
- 规划时间的范围，以及以周计数导致的604800s的偏差

#### 速度解算

- 根本在于对位置进行**求导**

#### 伪距与载波相位

##### 伪距相位

- 依然是利用四元方程，但是引入了各种原因导致的**延时**
- 伪距可以根据**导航电文结合C/A码相位CP**确定
  - 由帧-子帧-码-码片各层关系得到卫星发射信号时间$t_s$计算公式

##### 载波相位

- 利用载波相位差确定两点距离差
  - 但是可能有数个周期之差

##### 两者对比

- 伪距精度不如载波相位，但是伪距可以绝对定位，而载波相位有一个位置的周整模糊度N

#### 定位方程解算和定位精度

##### 牛顿迭代

- 前面得到的四元方程组是**非线形方程组**，需要用牛顿迭代法估计
- 在估计根附近泰勒展开，并得到更新后的估计根，进行迭代
- 利用**矩阵形式**，得到：$G\cdot \Delta x=b$，
  - 而在定位方程解算中，G只与**几何位置**有关

##### 最小二乘法

最小二乘法是用来求解牛顿迭代得到的矩阵

<img src="https://raw.githubusercontent.com/zhaopy20/pictures/main/img/202303181545475.png" alt="image-20230318154552434" style="zoom:67%;" />

注意有加权的最小二乘法

- 牛顿迭代需要注意收敛性

##### 定位精度

- 考虑**测量误差**和**定位误差**，对上述的矩阵形式进行更新<img src="https://raw.githubusercontent.com/zhaopy20/pictures/main/img/202303182106569.png" alt="image-20230318160519531" style="zoom:50%;" />
- 简化测量误差模型：正态分布、互不相关
- 最终将定位误差的方差看作测量误差方差被**权系数矩阵**放大的结果
  - 而权系数矩阵只与卫星**几何分布有关**
  - 因此GPS定位误差只取决于测量误差和卫星几何分布，**而与信号强弱和接收机好坏无关**

### 学习心得

##### 载波调制的作用

- 天线尺寸与频率成反比（正比与波长），因此高频可以见效天线尺寸
- 频率与损耗的关系：频率低,传播损耗小,覆盖距离远,绕射能力也强
  - 载波调制适合低频损耗大，或低频噪声比较大的信道
- 适合远距离传输
- 同时可以充分利用频谱资源
- 在GPS信号结构中，载波频率也需要高于伪码信号的功率

##### 四元方程的直观理解

- 定位解算的关键是求解由位置和接收机钟差四个未知量组成的四元方程组，可以从一些几何和数学直觉直观的理解求解的过程
  - 先从三维看，不考虑接收机钟差时，求解三个未知坐标需要三个方程
  - 具体到卫星就是需要三颗卫星，
    - 一颗卫星时只能得到球面
    - 两颗卫星能得到一个面
    - 三颗卫星就能得到两个交点
    - <img src="https://raw.githubusercontent.com/zhaopy20/pictures/main/img/202303142223730.png" alt="image-20230314222331655" style="zoom:80%;" />
  - 考虑钟差的四维情况，就是上面的三个圆半径是**伪距**，而钟差导致了**距离**是不确定的
    - 因此为了同时确定球的半径（**距离**）和交点，需要四颗卫星，调整半径让四个球交与一点
    - <img src="https://raw.githubusercontent.com/zhaopy20/pictures/main/img/202303151018742.png" alt="image-20230315101825660" style="zoom:50%;" />

